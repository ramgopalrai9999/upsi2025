<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UP Police SI (दरोगा )</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
        .app-container {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            flex-grow: 1;
        }
        .quiz-card {
            background-color: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
        }
        .btn {
            transition: all 0.3s ease;
        }
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        .btn.correct {
            background-color: #28a745 !important;
            color: white !important;
            border-color: #28a745 !important;
        }
        .btn.incorrect {
            background-color: #dc3545 !important;
            color: white !important;
            border-color: #dc3545 !important;
        }
        .review-answer.user-correct {
             border-left: 5px solid #28a745;
        }
        .review-answer.user-incorrect {
             border-left: 5px solid #dc3545;
        }
    </style>
</head>
<body class="bg-gray-100">

    <nav class="bg-white shadow-md w-full sticky top-0 z-10">
        <div class="max-w-6xl mx-auto px-4">
            <div class="flex justify-between">
                <div class="flex space-x-4">
                    <div>
                        <a href="index.html" class="flex items-center py-4 px-2 text-gray-700 hover:text-gray-900">
                             <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                 <path stroke-linecap="round" stroke-linejoin="round" d="M12 6.253v11.494m-5.247-8.247l10.494 0M12 21.747a9.494 9.494 0 100-18.988 9.494 9.494 0 000 18.988z" />
                            </svg>
                            <span class="font-bold text-lg">UP SI Quiz</span>
                        </a>
                    </div>
                </div>
                <div class="hidden md:flex items-center space-x-1">
                    <a href="index.html" class="py-5 px-3 text-gray-700 hover:text-blue-600 font-semibold">होम</a>
                    <a href="#" class="py-5 px-3 text-gray-700 hover:text-blue-600 font-semibold">एडमिट कार्ड</a>
                    <a href="#" class="py-5 px-3 text-gray-700 hover:text-blue-600 font-semibold">रिजल्ट</a>
                    <a href="about.html" class="py-5 px-3 text-gray-700 hover:text-blue-600 font-semibold">नोटिफिकेशन</a>
                    <a href="https://www.upprpb.in/#/auth/register" target="_blank" class="py-5 px-3 text-gray-700 hover:text-blue-600 font-semibold">अप्लाई करें</a>
                </div>
                <div class="md:hidden flex items-center">
                    <button id="mobile-menu-button">
                        <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                        </svg>
                    </button>
                </div>
            </div>
        </div>
        <div id="mobile-menu" class="hidden md:hidden">
            <a href="index.html" class="block py-2 px-4 text-sm hover:bg-gray-100">होम</a>
            <a href="#" class="block py-2 px-4 text-sm hover:bg-gray-100">एडमिट कार्ड</a>
            <a href="#" class="block py-2 px-4 text-sm hover:bg-gray-100">रिजल्ट</a>
            <a href="#" class="block py-2 px-4 text-sm hover:bg-gray-100">नोटिफिकेशन</a>
            <a href="https://www.upprpb.in/#/auth/register" target="_blank" class="block py-2 px-4 text-sm hover:bg-gray-100">अप्लाई करें</a>
        </div>
    </nav>

    <div class="app-container w-full flex flex-col items-center justify-center p-4">
        
        <header class="text-center mb-8 mt-8">
             <h1 class="text-white text-4xl md:text-5xl font-bold" style="text-shadow: 2px 2px 4px rgba(0,0,0,0.5);">UP Police SI (दरोगा )</h1>
        </header>

        <main class="w-full flex justify-center">
            <div id="main-card" class="quiz-card w-full max-w-2xl mx-auto rounded-2xl shadow-2xl p-6 md:p-8 text-center relative">
                <button id="back-btn" class="absolute top-6 left-6 text-gray-600 hover:text-gray-900 font-semibold py-2 px-3 rounded-lg bg-gray-100 hover:bg-gray-200 btn hidden">&larr; Back</button>
                <h2 id="quiz-title" class="text-3xl md:text-4xl font-bold text-gray-800 mb-2">Practice Set</h2>
                <hr class="border-gray-300 w-1/4 mx-auto my-4">
                
                <div id="quiz-content" class="hidden">
                     <div id="quiz-header" class="flex justify-between items-center mb-4 gap-4">
                         <div id="progress-container" class="w-full bg-gray-200 rounded-full h-4">
                             <div id="progress-bar" class="bg-blue-600 h-4 rounded-full transition-all duration-300" style="width: 0%"></div>
                        </div>
                    </div>
                    <h2 id="question" class="text-xl md:text-2xl font-semibold text-gray-700 my-6 min-h-[60px]">प्रश्न यहाँ दिखेगा</h2>
                    <div id="answer-buttons" class="grid grid-cols-1 md:grid-cols-2 gap-4 my-6">
                        </div>
                    <p id="explanation" class="text-md text-gray-700 mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg hidden text-left"></p>
                    <div class="flex justify-between items-center gap-4 mt-6">
                        <button id="prev-btn" class="w-full md:w-auto bg-gray-500 text-white font-semibold py-3 px-8 rounded-lg btn hover:bg-gray-600">पिछला प्रश्न</button>
                        <button id="next-btn" class="w-full md:w-auto bg-blue-600 text-white font-semibold py-3 px-8 rounded-lg btn hover:bg-blue-700">अगला प्रश्न</button>
                    </div>
                </div>

                <div id="start-screen" class="flex flex-col items-center">
                     <p class="text-gray-600 mb-6 text-lg">अपनी पसंद का विषय चुनें!</p>
                     <div id="category-buttons" class="grid grid-cols-1 md:grid-cols-2 gap-4 w-full max-w-md">
                          </div>
                </div>

                <div id="review-screen" class="hidden text-left">
                    <h2 class="text-2xl font-bold text-gray-800 mb-4">उत्तरों की समीक्षा करें</h2>
                    <div id="review-content" class="space-y-4"></div>
                     <div class="flex justify-center items-center gap-4 mt-6">
                         <button id="back-to-score-btn" class="w-full md:w-auto bg-gray-600 text-white font-semibold py-3 px-8 rounded-lg btn hover:bg-gray-700">वापस जाएं</button>
                    </div>
                </div>

            </div>
        </main>
    </div>
    
    <footer class="bg-gray-800 text-white text-center p-4 w-full">
        <div class="max-w-6xl mx-auto">
            <div class="flex flex-col md:flex-row justify-center items-center space-y-2 md:space-y-0 md:space-x-6">
                <a href="#" class="hover:text-blue-400 transition">About Us</a>
                <a href="#" class="hover:text-blue-400 transition">Contact Us</a>
                <a href="Privacy Policy.html" class="hover:text-blue-400 transition">Privacy Policy</a>
            </div>
            <p class="mt-4 text-sm text-gray-400">&copy; 2024 UP SI Quiz. All Rights Reserved.</p>
        </div>
    </footer>


    <script>
        // --- SOUND EFFECTS ---
        let audioContext;
        try {
            audioContext = new (window.AudioContext || window.webkitAudioContext)();
        } catch (e) {
            console.error("Web Audio API is not supported in this browser");
        }

        function playSound(type) {
            if (!audioContext) return;
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            gainNode.gain.setValueAtTime(0, audioContext.currentTime);
            gainNode.gain.linearRampToValueAtTime(0.3, audioContext.currentTime + 0.01);

            if (type === 'correct') {
                oscillator.type = 'sine';
                oscillator.frequency.setValueAtTime(600, audioContext.currentTime);
            } else if (type === 'incorrect') {
                oscillator.type = 'square';
                oscillator.frequency.setValueAtTime(200, audioContext.currentTime);
            }
            
            oscillator.start(audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.00001, audioContext.currentTime + 0.2);
            oscillator.stop(audioContext.currentTime + 0.2);
        }
        
        // --- MOBILE MENU ---
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        mobileMenuButton.addEventListener('click', () => {
            mobileMenu.classList.toggle('hidden');
        });

        // --- QUIZ DATA ---
        const quizData = {
            "सामान्य ज्ञान": [
                {
                    question: "भारत की राजधानी क्या है?",
                    answers: [
                        { text: "मुंबई", correct: false},
                        { text: "नई दिल्ली", correct: true},
                        { text: "कोलकाता", correct: false},
                        { text: "चेन्नई", correct: false},
                    ],
                    explanation: "नई दिल्ली को 1911 में भारत की राजधानी घोषित किया गया था।"
                },
                {
                    question: "ताजमहल किस शहर में स्थित है?",
                    answers: [
                        { text: "दिल्ली", correct: false},
                        { text: "जयपुर", correct: false},
                        { text: "आगरा", correct: true},
                        { text: "लखनऊ", correct: false},
                    ],
                    explanation: "ताजमहल आगरा में यमुना नदी के किनारे स्थित है, जिसे शाहजहाँ ने बनवाया था।"
                },
                {
                    question: "भारत का राष्ट्रीय पशु कौन है?",
                    answers: [
                        { text: "शेर", correct: false},
                        { text: "बाघ", correct: true},
                        { text: "हाथी", correct: false},
                        { text: "मोर", correct: false},
                    ],
                    explanation: "बाघ (Tiger) को 1973 में भारत का राष्ट्रीय पशु घोषित किया गया था।"
                }
            ],
            "विज्ञान": [
                {
                    question: "पानी का रासायनिक सूत्र क्या है?",
                    answers: [
                        { text: "O2", correct: false},
                        { text: "CO2", correct: false},
                        { text: "H2O", correct: true},
                        { text: "NaCl", correct: false},
                    ],
                    explanation: "पानी का एक अणु हाइड्रोजन के दो परमाणुओं और ऑक्सीजन के एक परमाणु से मिलकर बनता है।"
                },
                {
                    question: "प्रकाश संश्लेषण के लिए कौन सी गैस आवश्यक है?",
                    answers: [
                        { text: "ऑक्सीजन", correct: false},
                        { text: "नाइट्रोजन", correct: false},
                        { text: "कार्बन डाइऑक्साइड", correct: true},
                        { text: "हाइड्रोजन", correct: false},
                    ],
                    explanation: "पौधे सूर्य के प्रकाश का उपयोग करके कार्बन डाइऑक्साइड और पानी से अपना भोजन बनाते हैं।"
                },
                 {
                    question: "सौर मंडल का सबसे बड़ा ग्रह कौन सा है?",
                    answers: [
                        { text: "पृथ्वी", correct: false},
                        { text: "मंगल", correct: false},
                        { text: "बृहस्पति", correct: true},
                        { text: "शनि", correct: false},
                    ],
                    explanation: "बृहस्पति (Jupiter) हमारे सौर मंडल का सबसे बड़ा ग्रह है। यह इतना बड़ा है कि इसमें सभी अन्य ग्रह समा सकते हैं।"
                }
            ],
            "पॉलिटी": [
                 {
                    question: "भारतीय संविधान के जनक किसे कहा जाता है?",
                    answers: [
                        { text: "जवाहरलाल नेहरू", correct: false },
                        { text: "बी. आर. अंबेडकर", correct: true },
                        { text: "राजेंद्र प्रसाद", correct: false },
                        { text: "सरदार पटेल", correct: false }
                    ],
                    explanation: "डॉ. बी. आर. अंबेडकर मसौदा समिति के अध्यक्ष थे, इसलिए उन्हें भारतीय संविधान का जनक कहा जाता है।"
                },
                {
                    question: "भारतीय संविधान में मौलिक अधिकार किस अनुच्छेद से किस अनुच्छेद तक दिए गए हैं?",
                    answers: [
                        { text: "अनुच्छेद 12 से 35", correct: true },
                        { text: "अनुच्छेद 36 से 51", correct: false },
                        { text: "अनुच्छेद 52 से 78", correct: false },
                        { text: "अनुच्छेद 124 से 147", correct: false }
                    ],
                    explanation: "संविधान के भाग III में अनुच्छेद 12 से 35 तक मौलिक अधिकारों का वर्णन है।"
                },
                {
                    question: "मौलिक कर्तव्यों का विचार किस देश से लिया गया है?",
                    answers: [
                        { text: "अमेरिका", correct: false },
                        { text: "रूस (USSR)", correct: true },
                        { text: "ब्रिटेन", correct: false },
                        { text: "कनाडा", correct: false }
                    ],
                    explanation: "मौलिक कर्तव्यों को 42वें संशोधन द्वारा रूस (तत्कालीन USSR) के संविधान से प्रेरित होकर जोड़ा गया था।"
                },
                {
                    question: "राज्य के नीति निदेशक तत्व संविधान के किस भाग में हैं?",
                    answers: [
                        { text: "भाग II", correct: false },
                        { text: "भाग III", correct: false },
                        { text: "भाग IV", correct: true },
                        { text: "भाग V", correct: false }
                    ],
                    explanation: "राज्य के नीति निदेशक तत्व (DPSP) संविधान के भाग IV में दिए गए हैं।"
                },
                {
                    question: "प्रस्तावना में ‘धर्मनिरपेक्ष’ शब्द किस संशोधन द्वारा जोड़ा गया?",
                    answers: [
                        { text: "24वां संशोधन", correct: false },
                        { text: "42वां संशोधन", correct: true },
                        { text: "44वां संशोधन", correct: false },
                        { text: "52वां संशोधन", correct: false }
                    ],
                    explanation: "'धर्मनिरपेक्ष', 'समाजवादी' और 'अखंडता' शब्द 1976 में 42वें संविधान संशोधन द्वारा प्रस्तावना में जोड़े गए थे।"
                }
            ],
            "हिन्दी": [
                {
                    question: "'रामचरितमानस' के रचयिता कौन हैं?",
                    answers: [ { text: "सूरदास", correct: false }, { text: "तुलसीदास", correct: true }, { text: "कबीरदास", correct: false }, { text: "मीराबाई", correct: false } ],
                    explanation: "'रामचरितमानस' की रचना गोस्वामी तुलसीदास ने अवधी भाषा में की थी।"
                },
                {
                    question: "हिन्दी वर्णमाला में कितने स्वर होते हैं?",
                    answers: [ { text: "10", correct: false }, { text: "11", correct: true }, { text: "12", correct: false }, { text: "13", correct: false } ],
                    explanation: "हिन्दी वर्णमाला में परंपरागत रूप से 11 स्वर माने जाते हैं (अ, आ, इ, ई, उ, ऊ, ऋ, ए, ऐ, ओ, औ)।"
                }
            ],
            "UPSI 2021": [
                 {
                    question: "देवरदा का जन्म कहाँ हुआ था?",
                    answers: [
                        { text: "अौरैया", correct: true },
                        { text: "अमेरिका", correct: false },
                        { text: "फ्रांस", correct: false },
                        { text: "जर्मनी", correct: false }
                    ],
                    explanation: "देवरदा का जन्म उत्तर प्रदेश के अौरैया जिले में हुआ था।"
                },
                {
                    question: "'राम गया।' इस वाक्य में कौन-सा काल है?",
                    answers: [
                        { text: "सामान्य भूतकाल", correct: true },
                        { text: "आसन्न भूतकाल", correct: false },
                        { text: "पूर्ण भूतकाल", correct: false },
                        { text: "अपूर्ण भूतकाल", correct: false }
                    ],
                    explanation: "क्रिया के जिस रूप से काम के सामान्य रूप से बीते समय में पूरा होने का बोध हो, उसे सामान्य भूतकाल कहते हैं।"
                }
            ],
            "Indian History": [
                {
                    question: "सिंधु घाटी सभ्यता का सबसे महत्वपूर्ण स्थल कौन सा था?",
                    answers: [
                        { text: "हड़प्पा", correct: false },
                        { text: "मोहनजोदड़ो", correct: true },
                        { text: "लोथल", correct: false },
                        { text: "कालीबंगन", correct: false }
                    ],
                    explanation: "मोहनजोदड़ो, जिसे 'मृतकों का टीला' भी कहा जाता है, अपने विशाल स्नानागार और सुनियोजित शहरी योजना के लिए जाना जाता है।"
                },
                {
                    question: "मौर्य साम्राज्य की स्थापना किसने की?",
                    answers: [
                        { text: "अशोक", correct: false },
                        { text: "बिंदुसार", correct: false },
                        { text: "चंद्रगुप्त मौर्य", correct: true },
                        { text: "बृहद्रथ", correct: false }
                    ],
                    explanation: "चंद्रगुप्त मौर्य ने 322 ईसा पूर्व में चाणक्य की मदद से नंद वंश को हराकर मौर्य साम्राज्य की स्थापना की।"
                }
            ]
        };

        // --- DOM ELEMENTS ---
        const startScreen = document.getElementById('start-screen');
        const categoryButtonsContainer = document.getElementById('category-buttons');
        const quizContent = document.getElementById('quiz-content');
        const questionElement = document.getElementById('question');
        const answerButtons = document.getElementById('answer-buttons');
        const nextButton = document.getElementById('next-btn');
        const prevButton = document.getElementById('prev-btn');
        const backButton = document.getElementById('back-btn');
        const quizTitle = document.getElementById('quiz-title');
        const progressBar = document.getElementById('progress-bar');
        const explanationElement = document.getElementById('explanation');
        const mainCard = document.getElementById('main-card');
        const reviewScreen = document.getElementById('review-screen');
        const reviewContent = document.getElementById('review-content');
        const backToScoreBtn = document.getElementById('back-to-score-btn');
        
        // --- STATE VARIABLES ---
        let questions = [];
        let currentQuestionIndex = 0;
        let score = 0;
        let userAnswers = [];
        let currentCategory = '';

        // --- FUNCTIONS ---
        function setupCategories() {
            categoryButtonsContainer.innerHTML = '';
            const categories = ["सामान्य ज्ञान", "विज्ञान", "पॉलिटी", "हिन्दी", "UPSI 2021", "Indian History"];
            categories.forEach(category => {
                 if (quizData[category]) {
                    const button = document.createElement('button');
                    button.innerText = category;
                    button.classList.add('w-full', 'bg-green-500', 'text-white', 'font-bold', 'py-4', 'px-10', 'rounded-lg', 'btn', 'hover:bg-green-600', 'text-lg');
                    button.addEventListener('click', () => startQuiz(category));
                    categoryButtonsContainer.appendChild(button);
                 }
            });
        }

        function startQuiz(category) {
            currentCategory = category;
            let questionsFromCategory = [...quizData[category]];
            shuffleArray(questionsFromCategory);
            questions = questionsFromCategory;
            
            quizTitle.innerText = `${category} क्विज़`;
            startScreen.style.display = 'none';
            reviewScreen.style.display = 'none';
            quizContent.style.display = 'block';
            backButton.style.display = 'block';
            
            currentQuestionIndex = 0;
            score = 0;
            userAnswers = new Array(questions.length).fill(null);
            
            showQuestion();
        }

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }
        
        function showQuestion() {
            resetState();
            let currentQuestion = questions[currentQuestionIndex];
            let questionNo = currentQuestionIndex + 1;
            questionElement.innerHTML = questionNo + ". " + currentQuestion.question;

            const isAnswered = userAnswers[currentQuestionIndex] !== null;

            currentQuestion.answers.forEach(answer => {
                const button = document.createElement("button");
                button.innerHTML = answer.text;
                button.classList.add('w-full', 'text-center', 'p-4', 'border', 'border-gray-300', 'rounded-lg', 'text-gray-700', 'bg-white', 'hover:bg-gray-100', 'btn', 'text-lg');
                answerButtons.appendChild(button);
                
                if (answer.correct) {
                    button.dataset.correct = "true";
                }

                if (isAnswered) {
                    button.disabled = true;
                    if (button.dataset.correct === "true") {
                        button.classList.add("correct");
                    }
                    if (button.innerText === userAnswers[currentQuestionIndex] && !answer.correct) {
                        button.classList.add("incorrect");
                    }
                } else {
                    button.addEventListener("click", selectAnswer);
                }
            });

            if (isAnswered) {
                explanationElement.innerText = currentQuestion.explanation;
                explanationElement.style.display = "block";
            }

            updateProgressBar();
            updateNavigationButtons();
        }
        
        function resetState() {
            explanationElement.style.display = "none";
            while (answerButtons.firstChild) {
                answerButtons.removeChild(answerButtons.firstChild);
            }
        }
        
        function selectAnswer(e) {
            const selectedBtn = e.target;
            const isCorrect = selectedBtn.dataset.correct === "true";

            if (isCorrect) {
                playSound('correct');
                score++;
            } else {
                playSound('incorrect');
                selectedBtn.classList.add("incorrect");
            }

            userAnswers[currentQuestionIndex] = selectedBtn.innerText;
            
            Array.from(answerButtons.children).forEach(button => {
                if (button.dataset.correct === "true") {
                    button.classList.add("correct");
                }
                button.disabled = true;
            });
            
            explanationElement.innerText = questions[currentQuestionIndex].explanation;
            explanationElement.style.display = "block";
        }

        function handleNextQuestion() {
            if (currentQuestionIndex < questions.length - 1) {
                currentQuestionIndex++;
                showQuestion();
            } else {
                showScore();
            }
        }
        
        function handlePrevQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                showQuestion();
            }
        }

        function updateNavigationButtons() {
            prevButton.style.display = currentQuestionIndex === 0 ? 'none' : 'block';
            if (currentQuestionIndex === questions.length - 1) {
                nextButton.innerText = "स्कोर देखें";
            } else {
                nextButton.innerText = "अगला प्रश्न";
            }
        }

        function showScore() {
            quizContent.style.display = 'none';
            reviewScreen.style.display = 'none';

            const percentage = Math.round((score / questions.length) * 100);
            let remark = "";
            let remarkColor = "";

            if (percentage >= 80) {
                remark = "भाई तुम्हारा सेलक्सन तो पक्का है !";
                remarkColor = "text-green-600";
            } else if (percentage >= 50) {
                remark = "थोड़ी सी मेहनत और भाई !";
                remarkColor = "text-yellow-600";
            } else {
                remark = "और प्रैक्टिस करो भाई ";
                remarkColor = "text-red-600";
            }
            
            const shareText = encodeURIComponent(`मैंने UP Police SI क्विज़ में ${questions.length} में से ${score} अंक (${percentage}%) प्राप्त किए! आप भी চেষ্টা करें।`);
            const pageUrl = encodeURIComponent(window.location.href);

            mainCard.innerHTML = `
                <div class="flex flex-col items-center justify-center">
                    <p class="text-2xl font-bold mb-2"> समाप्त!</p>
                    <p class="text-xl mb-4">आपका स्कोर ${questions.length} में से ${score} है।</p>
                    <p class="text-5xl font-bold my-4">${percentage}%</p>
                    <p class="text-2xl font-semibold ${remarkColor}">${remark}</p>
                    <div class="flex space-x-4 my-6">
                        <a href="https://api.whatsapp.com/send?text=${shareText}%20${pageUrl}" target="_blank" class="bg-green-500 text-white py-2 px-4 rounded-lg btn hover:bg-green-600">WhatsApp पर शेयर करें</a>
                        <a href="https://twitter.com/intent/tweet?text=${shareText}&url=${pageUrl}" target="_blank" class="bg-blue-400 text-white py-2 px-4 rounded-lg btn hover:bg-blue-500"> X पर शेयर करें</a>
                    </div>
                    <div class="flex flex-col md:flex-row gap-4 mt-4 w-full">
                         <button id="review-answers-btn" class="w-full md:w-auto flex-1 bg-gray-600 text-white font-semibold py-3 px-8 rounded-lg btn hover:bg-gray-700">उत्तरों की समीक्षा करें</button>
                         <button id="restart-quiz-btn" class="w-full md:w-auto flex-1 bg-blue-600 text-white font-semibold py-3 px-8 rounded-lg btn hover:bg-blue-700">दोबारा खेलें</button>
                    </div>
                </div>
            `;
            document.getElementById('restart-quiz-btn').addEventListener('click', goHome);
            document.getElementById('review-answers-btn').addEventListener('click', displayReview);
        }

        function displayReview() {
             mainCard.style.display = 'none';
             reviewScreen.style.display = 'block';
             reviewContent.innerHTML = ''; 

             questions.forEach((question, index) => {
                const userAnswer = userAnswers[index];
                const correctAnswerObj = question.answers.find(ans => ans.correct);
                const isCorrect = userAnswer === correctAnswerObj.text;
                
                const questionDiv = document.createElement('div');
                questionDiv.classList.add('p-4', 'rounded-lg', 'bg-gray-50');

                let optionsHtml = '';
                question.answers.forEach(option => {
                    let classes = 'block p-2 my-1 rounded-md ';
                    if(option.correct) {
                        classes += 'bg-green-100 text-green-800 font-semibold';
                    }
                    if(option.text === userAnswer && !isCorrect){
                         classes += 'bg-red-100 text-red-800';
                    }
                    optionsHtml += `<div class="${classes}">${option.text}</div>`;
                });
                
                const resultClass = isCorrect ? 'user-correct' : 'user-incorrect';

                questionDiv.innerHTML = `
                    <p class="font-semibold text-lg mb-2">${index + 1}. ${question.question}</p>
                    <div class="review-answer ${resultClass} pl-3">
                        ${optionsHtml}
                        <p class="mt-2 text-sm"><b>आपका उत्तर:</b> ${userAnswer || 'कोई उत्तर नहीं दिया'}</p>
                    </div>
                `;
                reviewContent.appendChild(questionDiv);
             });
        }
        
        backToScoreBtn.addEventListener('click', () => {
             mainCard.style.display = 'block';
             reviewScreen.style.display = 'none';
        });

        function updateProgressBar(){
            const progressPercentage = ((currentQuestionIndex + 1) / questions.length) * 100;
            progressBar.style.width = `${progressPercentage}%`;
        }

        function goHome() {
            window.location.reload(); 
        }

        // Event Listeners
        nextButton.addEventListener('click', handleNextQuestion);
        prevButton.addEventListener('click', handlePrevQuestion);
        backButton.addEventListener('click', goHome);
        
        // Initial setup
        setupCategories();
    </script>
</body>
</html>